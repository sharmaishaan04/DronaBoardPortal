import{r,j as e,a as g,u as k,b as I}from"./index-PnoQm3iu.js";import{H as N,S as B,I as v}from"./HeadingComponent-BD6O2ul2.js";import{C as M}from"./ChoiceComponent-Bpkcg0Az.js";import _ from"./Upload-DkzYZCls.js";import{B as F}from"./ButtonComponent-Cl-D_kuS.js";import{R}from"./UploadFileComponent-DEi1Sd82.js";import"./DepartmentDropdown-CKIQy55d.js";const H="http://192.168.31.3:3000/api/v1",T=({style:s})=>{const[d,o]=r.useState(""),[n,u]=r.useState(""),[m,l]=r.useState(""),[c,h]=r.useState(""),[p,U]=r.useState(""),[b,f]=r.useState(""),[w,D]=r.useState(!1),y=async t=>{if(t.preventDefault(),c!=p){alert("Passwords Do Not match");return}if(!m||!d||!n||!c||!b){alert("Please fill in all fields");return}const S={username:m,firstName:d,lastName:n,password:c,designation:b,isAdmin:w};try{(await g.post(`${H}/user/signup`,S,{headers:{"Content-Type":"application/json"}})).data.message==="User created successfully"?(alert("User created successfully!"),window.location.reload(!0)):alert("Error creating user.")}catch(j){alert("Error creating user: "+j.message)}};return e.jsx("div",{className:"bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center",children:e.jsx("div",{className:s?"":"flex flex-col justify-center",children:e.jsx("div",{className:"rounded-lg bg-white w-80 text-center p-2 h-max px-4 shadow-lg",children:e.jsxs("form",{onSubmit:y,children:[e.jsx(N,{label:"Create User"}),e.jsx(B,{label:"Enter your infromation to create a User"}),e.jsx(v,{placeholder:"eg ishaan",label:"First Name",value:d,onChange:t=>{o(t.target.value)}}),e.jsx(v,{placeholder:"eg sharma",label:"Last Name",value:n,onChange:t=>u(t.target.value)}),e.jsx(v,{placeholder:"youremail@gmail.com",label:"Email",value:m,onChange:t=>l(t.target.value)}),e.jsx(v,{placeholder:"your password",label:"Password",type:"password",value:c,onChange:t=>h(t.target.value)}),e.jsx(v,{placeholder:"confirm password",label:"Confirm Password",type:"password",value:p,onChange:t=>U(t.target.value)}),e.jsx(v,{placeholder:"your designation",label:"Designation",value:b,onChange:t=>f(t.target.value)}),e.jsx(M,{label:"Admin Access",stateFunction:D,state:w}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"w-full text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Create"})})]})})})})},L=({label:s,headingLabel:d,buttonLabel:o,divisionId:n,setShow:u,onClick:m})=>{const[l,c]=r.useState("");return e.jsxs("div",{className:"z-10 shadow-lg absolute bg-white p-2  rounded-md",children:[e.jsx("div",{className:"text-lg text-center font-bold",children:d}),e.jsxs("div",{children:[e.jsx(v,{label:s,onChange:c}),e.jsx("div",{className:"mt-2",children:e.jsx(F,{label:o,onClick:()=>{m(l),u(h=>!h)}})})]})]})},A="http://192.168.31.3:3000/api/v1",$=({props:s,index:d,stateFunction:o})=>{const[n,u]=r.useState(!1),m=async l=>{try{if((await g.put(`${A}/division/edit/?id=${s.id}`,{name:l.target.value})).status===200){alert("Successfully Edited Division");return}}catch(c){alert(c.message)}};return e.jsx("div",{children:e.jsxs("div",{className:"flex h-fit p-2 my-1 border rounded-lg bg-white",children:[n&&e.jsx(L,{headingLabel:"Edit Division",label:"Enter Division Name",buttonLabel:"Edit",onClick:m,setShow:u}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"text-md font-medium text-amber-900",children:[d+1,"."]}),e.jsx("div",{className:"text-md font-medium text-amber-900 ml-1 w-12",children:s.name.slice()})]}),e.jsxs("div",{className:"text-md font-medium text-amber-900 ml-2",children:[e.jsx("button",{className:"border p-2 rounded-md mx-1 text-lg font-medium text-amber-900  bg-mycolor",onClick:()=>{confirm("Do you want to Edit Division")&&u(l=>!l)},children:"Edit"}),e.jsx("button",{className:"border p-2 rounded-md mx-1 text-lg font-medium text-amber-900  bg-mycolor",onClick:async()=>{if(confirm("Do you want to Delete Division"))try{(await g.delete(`${A}/division/delete/?id=${s.id}`)).status===200&&o(c=>c.filter(h=>h.id!=s.id)),alert("Division Deleted Successfully")}catch(l){alert(l)}},children:"Delete"})]})]})]})})},V="http://192.168.31.3:3000/api/v1",P=({props:s,stateFunction:d})=>{const o=k();return e.jsx("div",{className:" p-2 my-1 border rounded-lg bg-white w-full sm:w-full",children:e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs("div",{className:"text-left w-[50%]  overflow-auto",children:[e.jsx("div",{className:"text-md font-medium text-amber-900",children:`${s.firstName} ${s.lastName}`}),e.jsx("div",{className:"text-sm",children:s.username}),e.jsxs("div",{className:"flex",children:[s.designation,e.jsx("div",{className:"ml-2 font-medium text-amber-900",children:s.isAdmin?" Admin":" User"})]}),e.jsx("div",{})]}),e.jsxs("div",{className:"flex text-lg font-medium text-amber-900 items-center ",children:[e.jsx("button",{className:"border p-2 rounded-md mx-1 text-lg font-medium text-amber-900  bg-mycolor",onClick:()=>{confirm("Do u want to Update User ?")&&o(`/editUser/${s.id}`)},children:"Edit"}),e.jsx("button",{className:"border p-2 rounded-md mx-1 text-lg font-medium text-amber-900  bg-mycolor",onClick:async()=>{if(confirm("Do u want to Delete User ?"))try{const n=await g.delete(`${V}/user/delete/?id=${s.id}`);n.status===200&&d(u=>u.filter(m=>m.id!=s.id)),alert(n.data.message)}catch(n){alert("error deleting user",n)}},children:"Delete"})]})]})})},C="http://192.168.31.3:3000/api/v1",W=()=>{var E;const[s,d]=r.useState(!1),[o,n]=r.useState([]),[u,m]=r.useState([]),[l,c]=r.useState(!1),[h,p]=r.useState(!1),b=((E=I().state)==null?void 0:E.isAdmin)||!1,[f,w]=r.useState("Publish");r.useEffect(()=>{const i=async()=>{try{const x=await g.get(`${C}/division`);n(x.data)}catch(x){console.error("Error fetching divisions:",x)}},a=async()=>{try{const x=await g.get(`${C}/user`);m(x.data)}catch(x){console.error("Error fetching divisions:",x)}};i(),a()},[]);const D=async i=>{try{const a=await g.post(`${C}/division/create`,{name:i.target.value});if(a.status===201){alert("Successfully created Division"),n(x=>[...x,a.data.data]);return}alert("Unable to Create Division")}catch(a){alert(a.message)}};let y=o.slice(0,8),t=o.slice(8),S=u.slice(0,8),j=u.slice(8);return r.useEffect(()=>{y=o.slice(0,8),t=o.slice(8)},[o]),e.jsx("div",{className:"bg-mycolor font-myfont min-h-screen",children:b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center",children:e.jsx(N,{label:"Admin Panel"})}),e.jsxs("div",{className:"m-5 ",children:[e.jsx("div",{className:"font-bold text-2xl text-center opacity-70",children:"Select Option to Manage"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-white p-4 shadow-md rounded-lg mt-2",children:e.jsx(R,{orderType:f,setOrderType:w,orderArray:["Publish","Add User","Manage Divisions","Manage Users"],style:"text-lg font-medium ml-1"})})})]}),e.jsx("div",{className:"bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center",children:e.jsxs("div",{className:"",children:[f==="Publish"&&e.jsx(_,{isAdmin:b,style:!0}),f==="Add User"&&e.jsx(T,{style:!0}),f==="Manage Users"&&e.jsx("div",{className:" bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center mb-10",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"rounded-lg bg-white text-center p-2 px-4 shadow-lg w-80 sm:w-fit",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx(N,{label:"Users"})}),S.map((i,a)=>e.jsx(P,{stateFunction:m,props:i},a)),j.length>0&&e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>p(i=>!i),className:" p-2 border rounded-md text-lg font-medium text-amber-900 bg-mycolor",children:h?"Hide More":"Show More"}),h&&e.jsx("div",{className:" bg-white ",children:j.map((i,a)=>e.jsx(P,{props:i,index:a+8},a+8))})]})]})})}),f==="Manage Divisions"&&e.jsx("div",{className:" bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center mb-10",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"rounded-lg bg-white text-center p-2 px-4 shadow-lg w-80",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center mb-2.5",children:e.jsx(N,{label:"Divisions"})}),s&&e.jsx(L,{label:"Enter Division Name",buttonLabel:"Create",headingLabel:"Create Division",setShow:d,onClick:D}),y.map((i,a)=>e.jsx($,{props:i,index:a,stateFunction:n},a)),e.jsx("button",{onClick:()=>{confirm("Do you want to create new Division ? ")&&d(i=>!i)},className:" p-2 border rounded-md text-lg font-medium text-amber-900 bg-mycolor",children:"Create New Division"}),t.length>0&&e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>c(i=>!i),className:" p-2 mt-1 border rounded-md text-lg font-medium text-amber-900 bg-mycolor",children:l?"Hide":"Show More"}),l&&e.jsx("div",{className:" bg-white ",children:t.map((i,a)=>e.jsx($,{props:i,index:a+8,stateFunction:n},a+8))})]})]})})})})]})})]})})};export{W as default};
