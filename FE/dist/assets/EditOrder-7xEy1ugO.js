import{u as E,c as I,r as i,j as e,a as p}from"./index-PnoQm3iu.js";import{H as O,S as T,I as y}from"./HeadingComponent-BD6O2ul2.js";import{R as C,U as m}from"./UploadFileComponent-DEi1Sd82.js";import{D as N}from"./DepartmentDropdown-CKIQy55d.js";import{C as u}from"./ChoiceComponent-Bpkcg0Az.js";const h="http://192.168.31.3:3000/api/v1",_=()=>{const v=E(),{orderId:o}=I(),[s,n]=i.useState(null),[g,j]=i.useState([]),[x,d]=i.useState([]),[f,b]=i.useState(!1),[c,D]=i.useState(!1),[l,S]=i.useState(!1),[A,F]=i.useState(""),w=["ION","DO","CIRCULAR"];if(i.useEffect(()=>{const a=async()=>{try{const t=await p.get(`${h}/order/${o}`);n(t.data)}catch(t){console.error("Error fetching order:",t)}},r=async()=>{try{const t=await p.get(`${h}/division`);j(t.data)}catch(t){console.error("Error fetching divisions:",t)}};a(),r()},[o]),!s)return e.jsx("div",{children:"Loading..."});const U=async a=>{a.preventDefault();const r=new FormData;if(x.length>0&&x.forEach((t,R)=>{r.append("orderFiles",t)}),r.append("title",s.title),r.append("description",s.description),r.append("DocType",s.DocType),r.append("primaryAttachment",c),r.append("secondaryAttachment",l),r.append("divisionId",s.divisionId),!!confirm("Do u want to Update Doc"))try{(await p.put(`${h}/order/update/${o}`,r)).data.message==="Order updated successfully!"?(alert("Order updated successfully!"),v("/")):alert("Error updating order.")}catch(t){alert("Error updating order: "+t.message)}};return e.jsx("div",{className:"bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center ",children:e.jsx("div",{className:"flex flex-col justify-center",children:e.jsx("div",{className:"rounded-lg bg-white w-80 text-center p-2 h-max px-4",children:e.jsxs("form",{onSubmit:U,encType:"multipart/form-data",children:[e.jsx(O,{label:"Edit Order"}),e.jsx(T,{label:"Modify the details of the order"}),e.jsx(y,{placeholder:"Title",label:"Title",value:s.title,onChange:a=>n({...s,title:a.target.value})}),e.jsx(y,{placeholder:"Description",label:"Description",value:s.description,onChange:a=>n({...s,description:a.target.value})}),e.jsx("div",{className:"text-sm font-medium text-left py-2",children:"Select Division"}),e.jsx(N,{departmentNames:g,active:s.divisionId,setActive:a=>n({...s,divisionId:a}),label:"Select Division",onChange:()=>{}}),e.jsx("div",{className:"text-sm font-medium text-left py-2",children:"Doc Type"}),e.jsx(C,{orderType:A,orderArray:w,setOrderType:a=>{F(a)}}),e.jsxs("div",{children:[e.jsx(u,{label:"Update File?",stateFunction:b,state:f}),f&&e.jsx(m,{label:"Upload File",setFile:d,index:0})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx(u,{label:"Update Primary Attachment ?",stateFunction:D,state:c}),c&&e.jsx(m,{label:"Upload Primary Attachment",setFile:d,index:1})]})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx(u,{label:"Update Secondary Attachment ?",stateFunction:S,state:l}),l&&e.jsx(m,{label:"Upload Secondary Attachment",setFile:d,index:2})]})}),e.jsx("button",{type:"submit",className:"mt-3 w-full text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Update Order"})]})})})})};export{_ as default};
