import{r as s,u as J,j as e,a as h}from"./index-PnoQm3iu.js";import{D as P}from"./DepartmentDropdown-CKIQy55d.js";const G="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20367.6%20367.6'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20d='M286.5,222.4L182.9,326c-34.4,34.4-90,34.4-124.4,0l-2.8-2.8c-16.4-16.4-25.6-38.8-25.6-62.4c0-23.6,9.2-45.6,25.6-62.4%20l164-164c12-12,28-18.8,45.2-18.8s33.2,6.8,45.2,18.8l8.4,8.4c24.8,24.8,24.8,65.6,0,90.4l-68,68l-56,56.8%20c-18.8,18.8-49.2,18.8-68,0l-2.8-2.8c-18.8-18.8-18.8-49.2,0-68L231.3,80c3.2-3.2,3.2-8,0-11.2s-8-3.2-11.2,0L112.5,176%20c-24.8,24.8-24.8,65.6,0,90.4l2.8,2.8c12.4,12.4,28.8,18.8,45.2,18.8c16.4,0,32.8-6.4,45.2-18.8l56.4-56.4l68-68%20c31.2-31.2,31.2-82,0-113.2l-8.4-8.4C306.5,8,286.5,0,265.3,0c-21.2,0-41.6,8.4-56.4,23.2l-164,164c-20,19.6-30.8,46-30.8,73.6%20s10.8,54,30.4,73.6l2.8,2.8c20.4,20.4,46.8,30.4,73.6,30.4c26.8,0,53.2-10,73.6-30.4l103.6-103.6c3.2-3.2,3.2-8,0-11.2%20S289.7,219.2,286.5,222.4z'/%3e%3cpath%20d='M327.3,181.6l-8.8,8.8c-3.2,3.2-3.2,8,0,11.2c1.6,1.6,3.6,2.4,5.6,2.4s4-0.8,5.6-2.4l8.8-8.8c3.2-3.2,3.2-8,0-11.2%20C335.3,178.8,330.5,178.8,327.3,181.6z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='50px'%20height='50px'%3e%3cpath%20d='M%207%202%20L%207%2048%20L%2043%2048%20L%2043%2014.59375%20L%2042.71875%2014.28125%20L%2030.71875%202.28125%20L%2030.40625%202%20Z%20M%209%204%20L%2029%204%20L%2029%2016%20L%2041%2016%20L%2041%2046%20L%209%2046%20Z%20M%2031%205.4375%20L%2039.5625%2014%20L%2031%2014%20Z'/%3e%3c/svg%3e",Y="http://192.168.31.3:3000/api/v1",$="http://192.168.31.3:3000",ee=({props:t,isAdmin:c,orders:r,setOrders:f,divisions:i})=>{const[a,m]=s.useState(!1),p=J(),u=t.createdAt;if(!i||i.length===0)return e.jsx("div",{children:"Loading divisions..."});const I=u.slice(0,4),b=u.slice(5,7),A=u.slice(8,10),j=i.filter(y=>y.id==t.divisionId)[0].name,E=t.DocLink!=="",w=["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"];return e.jsx("div",{className:"h-fit p-2 my-3 shadow-2xl rounded-lg bg-white w-full text-left ",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"detail-container flex ",children:[e.jsxs("div",{className:" w-15 h-fit flex-col display-date",children:[e.jsx("div",{className:"text-md ",children:w[Number(b)-1]}),e.jsx("div",{className:"text-lg font-medium text-amber-900",children:A}),e.jsx("div",{className:"text-sm",children:I})]}),e.jsxs("div",{className:"ml-2 displaying-details",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-lg font-medium text-amber-900 cursor-pointer",onClick:()=>{t.DocLink&&window.open(`${$}/uploads/${t.DocLink.split("/")[2]}`,"_blank")},children:t.title})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{children:j}),e.jsxs("div",{className:"font-medium",children:["-",t.DocType]})]}),e.jsxs("div",{className:"text-sm ",children:[t.description," "]})]})]}),e.jsxs("div",{className:"sm:flex sm:flex-row sm:items-center",children:[e.jsx("button",{onClick:()=>m(!a),className:"self-baseline md:hidden ",onBlur:()=>m(!1),children:"☰"}),e.jsxs("nav",{className:`z-12 absolute right-1 h-fit 
                        ${a?"flex flex-col space-y-2":"hidden"} 
                        md:flex md:flex-row md:items-center md:static md:space-y-0 space-x-2`,children:[c&&e.jsxs("div",{children:[e.jsx("button",{className:"shadow-md p-2 rounded-lg mx-1 text-lg font-medium text-amber-900  bg-mycolor cursor-pointer",onClick:()=>{confirm("Do u want to Update Doc")&&p(`/editDoc/${t.id}`)},children:"Edit"}),e.jsx("button",{className:" shadow-md p-2 rounded-lg mx-1 text-lg font-medium text-amber-900 bg-mycolor cursor-pointer",onClick:async()=>{if(confirm("Do you want to delete Document?"))try{const d=await h.delete(`${Y}/order/delete`,{data:{orderID:t.id}});(d.status=200)&&(f(r.filter(v=>v!==t)),alert("Document Deleted Successfully"))}catch(d){alert(d)}},children:"Delete"})]}),e.jsxs("div",{className:"flex space-x-2",children:[E&&e.jsx("button",{className:"shadow-md p-2 rounded-lg  bg-mycolor cursor-pointer w-fit",onClick:()=>{window.open(`${$}/uploads/${t.DocLink.split("/")[2]}`,"_blank")},children:e.jsx("img",{src:X,width:20,alt:"File"})}),t.primaryAttachment&&e.jsx("button",{className:"shadow-md p-2 rounded-lg  w-fit bg-mycolor cursor-pointer",onClick:()=>{window.open(`${$}/uploads/${t.primaryAttachmentLink.split("/")[2]}`,"_blank")},children:e.jsx("img",{src:G,width:20,alt:"Attachment 1"})}),t.secondaryAttachment&&e.jsx("button",{className:"shadow-md p-2 rounded-lg w-fit bg-mycolor cursor-pointer",onClick:()=>{window.open(`${$}/uploads/${t.secondaryAttachmentLink.split("/")[2]}`,"_blank")},children:e.jsx("img",{src:G,width:20,alt:"Attachment 1"})})]})]})]})]})})},g="http://192.168.31.3:3000/api/v1",ne=()=>{const t=["ION","DO","CIRCULAR"],c=J(),[r,f]=s.useState(!1),[i,a]=s.useState(!1),[m,p]=s.useState(0),[u,I]=s.useState([]),[b,A]=s.useState(""),[j,E]=s.useState(0),[w,y]=s.useState(0),[d,v]=s.useState([]),[T,V]=s.useState(10);new Date().toISOString().slice(0,7);const[N,U]=s.useState(""),[D,M]=s.useState(""),[S,Z]=s.useState(!1),[H,_]=s.useState(!1),[F,q]=s.useState(!1),[B,K]=s.useState(!1),[z,Q]=s.useState(null);s.useEffect(()=>{const o=async()=>{try{const n=await h.get(`${g}/division`);I(n.data)}catch(n){console.error("Error fetching divisions:",n)}};async function l(){try{const n=await h.get(`${g}/user/isAdmin`);Z(n.data.data)}catch(n){console.log(n)}}async function R(){try{const n=await h.get(`${g}/user/isSignIn`);if(n.status===401)_(!1);else if(n.status===200){_(!0);const x=n.data.userId;O(x)}}catch(n){console.log(n)}}async function O(n){try{const x=await h.get(`${g}/user/${n}`);Q(x.data)}catch(x){console.log(x)}}l(),o(),R()},[]),s.useEffect(()=>{C()},[b,T,N,D]);const C=async(o=1)=>{const l=w===0?"":encodeURIComponent(w),R=N?encodeURIComponent(N):"",O=D?encodeURIComponent(D):"",n=encodeURIComponent(j),x=encodeURIComponent(b);try{const k=await h.get(`${g}/order/bulk?filter=${n}&filterType=${l}&filterText=${x}&startDate=${R}&endDate=${O}&page=${o}&limit=${T}`),L=k.data.data,W=k.data.totalOrders;if(!L||!Array.isArray(L)){console.error("Invalid data received:",L),v([]);return}v(L),p(W)}catch(k){console.error("Error fetching orders:",k)}};return e.jsx("div",{className:" bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center",children:e.jsx("div",{className:"rounded-lg text-center p-2 px-4 flex",children:e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("div",{className:"flex justify-center ",children:e.jsxs("div",{className:"w-fit p-2",children:[e.jsxs("div",{className:"flex justify-between items-center space-x-1",children:[e.jsx("div",{className:"font-bold text-3xl text-slate-800 bg-white shadow-xl rounded-md p-2 sm:text-4xl",children:"NOTICE BOARD"}),e.jsx("div",{className:"",children:H===!0?e.jsxs("div",{children:[e.jsx("button",{onClick:()=>f(!r),className:"md:hidden bg-white p-1 rounded-md",children:"☰"}),e.jsxs("nav",{className:`z-12 absolute right-1 h-fit 
                        ${r?"flex flex-col space-y-2":"hidden"} 
                        md:flex md:flex-row md:items-center md:static md:space-y-0 space-x-2`,children:[e.jsx("div",{className:"shadow-xl p-2 rounded-md bg-white text-orange-900 w-full",children:z?`${z.username}`:""}),e.jsx("button",{className:"shadow-xl p-2 rounded-md bg-white text-orange-900 cursor-pointer w-full",onClick:async()=>{if(confirm("Do you want to Logout ?"))try{const l=await h.post(`${g}/user/logout`);if(l.status===200)localStorage.removeItem("token"),alert(l.data.message),c("/signin");else throw new Error(l.data.message)}catch(l){console.log(l)}},children:"Logout"}),!S&&e.jsx("button",{className:"shadow-xl  p-2 ml-2 rounded-md bg-white text-orange-900 cursor-pointer w-full",onClick:()=>{c("/upload")},children:"Upload"}),S&&e.jsx("button",{className:"shadow-xl  p-2 rounded-md  bg-white text-orange-900 cursor-pointer w-full",onClick:()=>{c("/admin",{state:{isAdmin:S}})},children:"Admin"})]})]}):e.jsx("div",{className:"flex items-center",children:e.jsx("button",{className:"shadow-xl p-2 rounded-md bg-white text-orange-900 cursor-pointer",onClick:()=>{c("/signin")},children:"Login"})})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex h-fit items-center font-bold text-2xl mt-2 text-slate-700 opacity-70 w-fit bg-white p-1 shadow-xl rounded-md ",children:e.jsx("div",{className:"",children:"FILTERS"})}),e.jsx("div",{className:"mt-2 flex items-center text-left",children:e.jsxs("div",{children:[e.jsx("button",{onClick:()=>a(!i),className:"xl:hidden p-1 bg-white rounded-md ",children:"☰"}),e.jsxs("nav",{className:`z-10 absolute left-[20%] h-fit  bg-mycolor rounded-md shadow-lg p-2
                        ${i?"flex flex-col space-y-2":"hidden"} 
                        xl:flex xl:flex-row xl:items-center xl:static xl:space-y-0 space-x-2 `,children:[!F&&e.jsx("button",{className:"placeholder-black shadow-md p-2 rounded-md bg-white cursor cursor-pointer",onClick:()=>{q(!0)},children:"Choose Start Date"}),F&&e.jsx("input",{type:"month",className:"placeholder-black shadow-md p-2 rounded-md bg-white cursor cursor-pointer",value:N,placeholder:"Choose StartDate",onChange:o=>{if(!o.target.value){U("");return}U(o.target.value)}}),!B&&e.jsx("button",{className:"placeholder-black shadow-md p-2 rounded-md bg-white cursor cursor-pointer",onClick:()=>{K(!0)},children:"Choose End Date"}),B&&e.jsx("input",{type:"month",className:"placeholder-black shadow-md  min-w-4xs p-2 ml-2 rounded-md bg-white cursor-pointer",value:D,placeholder:"Choose EndDate",onChange:o=>{if(!o.target.value){M("");return}M(o.target.value)}}),e.jsx("input",{placeholder:"Search by Title",type:"text",className:"placeholder-black shadow-md  p-2 rounded-md bg-white text-center",onChange:o=>{A(o.target.value)}}),e.jsx(P,{departmentNames:u,active:j,setActive:E,onChange:C,label:"Select Division"}),e.jsx(P,{departmentNames:t,active:w,setActive:y,onChange:C,label:"Select Doc Type"})]})]})})]}),e.jsx("div",{className:"",children:d.length>0?d.map((o,l)=>e.jsx(ee,{props:o,isAdmin:S,orders:d,setOrders:v,divisions:u},l)):e.jsx("div",{className:"text-gray-500 text-center",children:"No orders found"})})]})}),e.jsx(te,{fetchOrders:C,totalOrders:m,limit:T,setLimit:V,length:d.length})]})})})},te=({fetchOrders:t,totalOrders:c,limit:r,setLimit:f,length:i})=>{const[a,m]=s.useState(1);return e.jsx("div",{className:" m-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex justify-center bg-rose-50 p-1 shadow-xl rounded-lg",children:[e.jsxs("div",{className:"px-2 py-1 shadow-xl rounded-md bg-white text-orange-900 font-semibold flex items-center",children:[e.jsx("div",{children:"Max record : "}),e.jsx("input",{className:" border py-1 text-center ml-2 border-amber-900 rounded-md bg-mycolor text-orange-900 font-semibold",type:"number",defaultValue:r,min:1,max:c,onChange:p=>{f(p.target.value)}})]}),e.jsxs("div",{className:"ml-2 pagination-controls shadow-xl bg-white rounded-md text-orange-900 flex items-center space-x-3 py-1",children:[e.jsx("button",{className:`px-2 py-1 ml-1 rounded-md font-semibold transition duration-200 ${a===1?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-amber-900 text-white hover:bg-orange-600"}`,onClick:()=>{a>1&&(m(a-1),t(a-1))},disabled:a===1,children:"<"}),e.jsx("span",{className:"px-2  border border-amber-900 rounded-md bg-white text-orange-900 font-semibold",children:a}),e.jsx("button",{className:`px-2 py-1 mr-1 rounded-md font-semibold transition duration-200 ${a*r>=c?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-amber-900 text-white hover:bg-orange-600"}`,onClick:()=>{a*r<c&&(m(a+1),t(a+1))},disabled:a*r>=c,children:">"})]}),e.jsx("div",{className:"ml-2 px-2 py-2 bg-white shadow-xl rounded-md text-orange-900 font-semibold flex items-center",children:`Showing  ${(a-1)*r+i} of ${c} `})]})})})};export{ne as default};
