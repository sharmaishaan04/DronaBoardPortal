import{u as B,r as s,j as e,a as f}from"./index-PnoQm3iu.js";import{H as L,S as _,I as v}from"./HeadingComponent-BD6O2ul2.js";import{R as $,U as u}from"./UploadFileComponent-DEi1Sd82.js";import{D as k}from"./DepartmentDropdown-CKIQy55d.js";import{C as h}from"./ChoiceComponent-Bpkcg0Az.js";const y="http://192.168.31.3:3000/api/v1",Q=({isAdmin:g,style:j})=>{const D=B(),[b,S]=s.useState([]),[i,A]=s.useState(0),[o,r]=s.useState([]),[x,w]=s.useState(!0),[l,N]=s.useState(!1),[c,F]=s.useState(!1),[d,C]=s.useState(""),[m,I]=s.useState(""),[p,T]=s.useState(""),[E,O]=s.useState(new Date().toISOString()),[P,U]=s.useState(new Date().toISOString().slice(0,7)),R=["ION","DO","CIRCULAR"];s.useEffect(()=>{(async()=>{try{const t=await f.get(`${y}/division`);S(t.data)}catch(t){console.error("Error fetching divisions:",t)}})()},[]);const H=async a=>{if(a.preventDefault(),!d||!m||!p||i==0){alert("Please fill in all fields");return}const t=new FormData;o.forEach((n,G)=>{t.append("orderFiles",n)}),t.append("title",d),t.append("description",m),t.append("DocType",p),t.append("primaryAttachment",l),t.append("secondaryAttachment",c),t.append("divisionId",i),t.append("createdAt",E),t.append("createdDate",P);try{(await f.post(`${y}/order/upload`,t)).data.message==="Order uploaded successfully!"?(alert("Order uploaded successfully!"),D("/")):alert("Error uploading order.")}catch(n){alert("Error uploading order: "+n.message)}};return e.jsx("div",{className:" bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center ",children:e.jsx("div",{className:j?"":"flex flex-col justify-center",children:e.jsx("div",{className:"rounded-lg bg-white w-80 text-center p-2 h-max px-4 shadow-lg ",children:e.jsxs("form",{onSubmit:H,encType:"multipart/form-data",children:[e.jsx(L,{label:"Publish Doc"}),e.jsx(_,{label:"Add the information to publish the Doc"}),e.jsx(v,{placeholder:"Title",label:"Add Title",value:d,onChange:a=>C(a.target.value)}),e.jsx(v,{placeholder:"Description",label:"Add Description",value:m,onChange:a=>I(a.target.value)}),e.jsx("div",{className:"text-sm font-medium text-left py-2",children:"Select Division"}),e.jsx("div",{className:"flex",children:e.jsx(k,{departmentNames:b,active:i,setActive:A,label:"Select Division",onChange:()=>{}})}),e.jsx("div",{className:"text-sm font-medium text-left py-2",children:"Doc Type"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"bg-white p-4 shadow-md rounded-lg mt-2 ",children:e.jsx($,{orderType:p,orderArray:R,setOrderType:a=>{T(a)}})})}),g&&e.jsxs("div",{className:"flex flex-col mt-2",children:[e.jsx("div",{className:"text-sm font-medium text-left",children:"Select Date"}),e.jsx("input",{type:"date",className:"placeholder-black border w-3xs text-orange-900 p-2 rounded-md bg-white mt-2",onChange:a=>{const n=new Date(a.target.value).toISOString();console.log(n),O(n),U(n.slice(0,7))}})]}),e.jsxs("div",{children:[e.jsx(h,{label:"Any File to Publish?",stateFunction:w,state:x}),x&&e.jsx(u,{label:"Upload File",setFile:r,index:0})]}),e.jsx("div",{children:o[0]&&e.jsxs("div",{children:[e.jsx(h,{label:"Any Primary Attachment ?",stateFunction:N,state:l}),l&&e.jsx(u,{label:"Upload Primary Attachment",setFile:r,index:1})]})}),e.jsx("div",{children:o[1]&&e.jsxs("div",{children:[e.jsx(h,{label:"Any Secondary Attachment?",stateFunction:F,state:c}),c&&e.jsx(u,{label:"Upload Secondary Attachment",setFile:r,index:2})]})}),e.jsx("button",{type:"submit",className:"mt-3 w-full text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Publish"})]})})})})};export{Q as default};
