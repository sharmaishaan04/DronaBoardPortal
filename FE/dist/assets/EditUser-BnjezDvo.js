import{u as I,c as P,r as t,j as e,a as b}from"./index-PnoQm3iu.js";import{H as A,S as F,I as n}from"./HeadingComponent-BD6O2ul2.js";import{C as v}from"./ChoiceComponent-Bpkcg0Az.js";const y="http://192.168.31.3:3000/api/v1",B=({style:w})=>{const N=I(),{userId:o}=P(),[S,E]=t.useState(null),[l,m]=t.useState(""),[i,g]=t.useState(""),[u,f]=t.useState(""),[c,C]=t.useState(!1),[p,U]=t.useState(""),[d,h]=t.useState(""),[x,j]=t.useState(!1);if(t.useEffect(()=>{(async()=>{try{const a=(await b.get(`${y}/user/${o}`)).data;E(a),m(a.firstName||""),g(a.lastName||""),f(a.username||""),h(a.designation||""),j(a.isAdmin||!1)}catch(r){console.error("Error fetching user",r)}})()},[o]),!S)return e.jsx("div",{children:"Loading..."});const D=async s=>{if(s.preventDefault(),!u||!l||!i||!d){alert("Please fill in all fields");return}const r={username:u,firstName:l,lastName:i,designation:d,isAdmin:x};if(c&&(r.password=p),!!confirm("Do you want to update the user?"))try{const a=await b.put(`${y}/user/update/${o}`,r,{headers:{"Content-Type":"application/json"}});a.status===200?(alert(a.data.message),N("/")):alert(a.data.message)}catch(a){alert("Error updating user: "+a.message)}};return e.jsx("div",{className:"bg-linear-to-b from-mycolor to-rose-200 font-myfont min-h-screen flex justify-center",children:e.jsx("div",{className:w?"":"flex flex-col justify-center",children:e.jsx("div",{className:"rounded-lg bg-white w-80 text-center p-2 h-max px-4",children:e.jsxs("form",{onSubmit:D,children:[e.jsx(A,{label:"Edit User"}),e.jsx(F,{label:"Enter information to update a user"}),e.jsx(n,{placeholder:"e.g., Ishaan",label:"First Name",value:l,onChange:s=>m(s.target.value)}),e.jsx(n,{placeholder:"e.g., Sharma",label:"Last Name",value:i,onChange:s=>g(s.target.value)}),e.jsx(n,{placeholder:"youremail@gmail.com",label:"Email",value:u,onChange:s=>f(s.target.value)}),e.jsx(v,{label:"Update Password?",stateFunction:C,state:c}),c&&e.jsx(n,{placeholder:"Your password",label:"Password",value:p,onChange:s=>U(s.target.value)}),e.jsx(v,{label:"Admin Access",stateFunction:j,state:x}),e.jsx(n,{placeholder:"Your designation",label:"Designation",value:d,onChange:s=>h(s.target.value)}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"w-full text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2",children:"Update"})})]})})})})};export{B as default};
